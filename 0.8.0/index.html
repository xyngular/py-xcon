
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="detailed_overview/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Getting Started - Docs for xcon</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Docs for xcon" class="md-header__button md-logo" aria-label="Docs for xcon" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docs for xcon
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Docs for xcon" class="md-nav__button md-logo" aria-label="Docs for xcon" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Docs for xcon
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="." class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    xcon
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_1" id="__nav_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            xcon
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="detailed_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Detailed Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="api/xcon/" target="_blank" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#special-env-vars-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Special Env-Vars / Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Special Env-Vars / Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xcon_only_env_provider" class="md-nav__link">
    <span class="md-ellipsis">
      XCON_ONLY_ENV_PROVIDER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xcon_disable_default_cacher" class="md-nav__link">
    <span class="md-ellipsis">
      XCON_DISABLE_DEFAULT_CACHER
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app_env-app_name" class="md-nav__link">
    <span class="md-ellipsis">
      APP_ENV / APP_NAME
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-use" class="md-nav__link">
    <span class="md-ellipsis">
      Why Use
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      Install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-it" class="md-nav__link">
    <span class="md-ellipsis">
      Using It
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#places-configuration-is-retrieved-from" class="md-nav__link">
    <span class="md-ellipsis">
      Places Configuration is Retrieved From
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Places Configuration is Retrieved From">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#param-store-provider-specifics" class="md-nav__link">
    <span class="md-ellipsis">
      Param Store Provider Specifics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets-manager-provider-specifics" class="md-nav__link">
    <span class="md-ellipsis">
      Secrets Manager Provider Specifics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-sensitivity" class="md-nav__link">
    <span class="md-ellipsis">
      Case Sensitivity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      Add Permissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    <span class="md-ellipsis">
      Caching
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-to-live" class="md-nav__link">
    <span class="md-ellipsis">
      Time to live
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-layout-details" class="md-nav__link">
    <span class="md-ellipsis">
      Table Layout Details
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Unit Tests
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<details class="warning" open="open">
<summary>Docs not finished and are out of date!</summary>
<p>This is pre-release software, based on another code base and the docs
have not yet been completely finished/changed to accommodate the changes
made to clean aspects of it.</p>
<p>This will be fixed soon.</p>
<p>For now, if you see refrences/names to things that don't exist
or have slightly different names in code, just beware of the situation.</p>
<p>Thank you for your support while the code base transitions to being open-source!</p>
</details>
<p>This read me is split into several sections.</p>
<p>The first is a quick reference on specific environmental variables, and basic use
so people coming back to document can just look at that to remind themselves.</p>
<p>Second part is a quick start section, that has basic information on how to install
and use the config library in projects/code.</p>
<p>Third part goes in-depth on various topics, so someone looking for more details on how
config works can get them.</p>
<h1 id="special-env-vars-settings">Special Env-Vars / Settings<a class="headerlink" href="#special-env-vars-settings" title="Permanent link">&para;</a></h1>
<p>Quick reference to commonly used settings that you might need to lookup quickly and reference
while using config in an ongoing basis.</p>
<p>If you know nothing and want the basics, go to <a href="#why-use">Why Use</a></p>
<p>Many of the settings have environmental variables you can use,
if the settings are not explicitly set then it falls-back to
the environmental variables.</p>
<p>The simplest way to explicitly set the settings is to import the
xcon_settings object and set the attributes on it; ie:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">xcon</span> <span class="kn">import</span> <span class="n">xcon_settings</span>

<span class="c1"># Example of explicitly setting service name:</span>
<span class="n">xcon_settings</span><span class="o">.</span><span class="n">service</span> <span class="o">=</span> <span class="s2">&quot;MyAppName&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="xcon_only_env_provider">XCON_ONLY_ENV_PROVIDER<a class="headerlink" href="#xcon_only_env_provider" title="Permanent link">&para;</a></h3>
<p>If "true", by default Config will only use env-variables.</p>
<p>You can also set this via 
<a href="api/xcon/conf.html#xcon.conf.XconSettings.only_env_provider" target="_blank"><code>XconSettings.only_env_provider</code></a>.</p>
<p>This also implicitly disables the default cacher.</p>
<p>See <a href="detailed_overview/#disable-default-dynamo-caching">Disable Default Dynamo Caching</a>
See <a href="detailed_overview/#disable-cache-non-environmental-providers">Disable Cache + Non-Environmental Providers</a></p>
<h3 id="xcon_disable_default_cacher">XCON_DISABLE_DEFAULT_CACHER<a class="headerlink" href="#xcon_disable_default_cacher" title="Permanent link">&para;</a></h3>
<p>If 'true', by default dynamo cacher will be disabled, unless specifically overridden.
(ie: the <code>Default</code> instance of the dynamo cacher is <code>None</code>).</p>
<p>You can also set this via 
<a href="api/xcon/conf.html#xcon.conf.XconSettings.disable_default_cacher" target="_blank"><code>XconSettings.disable_default_cacher</code></a>.</p>
<p>See <a href="detailed_overview/#disable-default-dynamo-caching">Disable Default Dynamo Caching</a></p>
<h3 id="app_env-app_name">APP_ENV / APP_NAME<a class="headerlink" href="#app_env-app_name" title="Permanent link">&para;</a></h3>
<p>These are the defaults for <a href="api/xcon/config.html#xcon.config.Config.service" target="_blank"><code>Config.service</code></a>
and <a href="api/xcon/config.html#xcon.config.Config.environment" target="_blank"><code>Config.environment</code></a>,
that config uses to construct its <code>Default</code> list of directories to search
when looking for things.</p>
<p>Also, these are used by DynamoCacher to determine the hash-key it uses to store cached values.
If either of these env-vars are blank/non-existent, then
<a href="api/xcon/providers/dynamo.html#xcon.providers.dynamo.DynamoCacher" target="_blank"><code>DynamoCacher</code></a>
will fall back to using <a href="api/xcon/config.html#xcon.config.Config.service" target="_blank"><code>Config.service</code></a>
and <a href="api/xcon/config.html#xcon.config.Config.environment" target="_blank"><code>Config.environment</code></a>
for the hash-key it uses for the DynamoCache table.</p>
<h1 id="why-use">Why Use<a class="headerlink" href="#why-use" title="Permanent link">&para;</a></h1>
<p>xcon's goal as a library is to simplify/abstract configuration lookup for our various
processors and services. Allows us to easily add new providers/services for configuration
with minimal changes to our projects (normally, just updating to latest <code>xcon</code> library).</p>
<p>It's also more secure to retrieve secrets at run time than store them as environmental
variables, since env-variables are normally stored in a task or lambda definition and are
more easily seen and usually not-encrypted (although that's improving over time in aws).</p>
<h1 id="quick-start">Quick Start<a class="headerlink" href="#quick-start" title="Permanent link">&para;</a></h1>
<h2 id="install">Install<a class="headerlink" href="#install" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># via pip</span>
pip<span class="w"> </span>install<span class="w"> </span>xcon

<span class="c1"># via poetry</span>
poetry<span class="w"> </span>add<span class="w"> </span>xcon
</code></pre></div></td></tr></table></div>
<h2 id="using-it">Using It<a class="headerlink" href="#using-it" title="Permanent link">&para;</a></h2>
<p>From the get-go and by default, environmental variables will 'just work'.</p>
<p>The main class is <code>Config</code> via <code>from xcon import Config</code>.</p>
<p>This class uses <a href="https://pypi.org/project/xinject/">xinject</a> to do dependency injection.
You can easily inject a new version/configuration of the object without having to couple you code too close
together to get your configuration settings.</p>
<p>You get the current Config object via:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">xcon</span> <span class="kn">import</span> <span class="n">Config</span>

<span class="n">current_config</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">grab</span><span class="p">()</span>
<span class="n">setting_value</span> <span class="o">=</span> <span class="n">current_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>An easier way to always use the current Config object is to use a proxy object.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Instead of importing the class, we import a proxy to the currently injected instance:</span>
<span class="kn">from</span> <span class="nn">xcon</span> <span class="kn">import</span> <span class="n">config</span>

<span class="n">setting_value</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Alternatively, ou can also use <code>Config.proxy()</code> to get a proxy.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Importing proxy object to current Config injectable dependency.</span>
<span class="c1"># You can use it as if you did `Config.grab()`, as it does this</span>
<span class="c1"># for you each time you get something from it.</span>
<span class="kn">from</span> <span class="nn">xcon</span> <span class="kn">import</span> <span class="n">config</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Setting a environmental variable value to showcase retrieving it.</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SOME_CONFIG_VARIABLE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;my-value&quot;</span>

<span class="c1"># If you had an environmental variable called `SOME_CONFIG_VARIABLE`, this would find it:</span>
<span class="k">assert</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_config_variable&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;my-value&quot;</span>

<span class="c1"># Alternate &#39;dict; syntax, works just like you would expect.</span>
<span class="c1"># Just like dict, it will raise an exception if value not found.</span>
<span class="k">assert</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;some_config_variable&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;my-value&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Config names are case-insensitive (although directory names are case-sensitive).</p>
<p>By default, <a href="api/xcon/config.html#xcon.config.Config" target="_blank"><code>Config</code></a> will look at environmental variables first,
and then other remote places second (the order and where to look is all configurable).</p>
<h1 id="quick-overview">Quick Overview<a class="headerlink" href="#quick-overview" title="Permanent link">&para;</a></h1>
<h2 id="places-configuration-is-retrieved-from">Places Configuration is Retrieved From<a class="headerlink" href="#places-configuration-is-retrieved-from" title="Permanent link">&para;</a></h2>
<p>As a side note for the below paths the <code>SERVICE_NAME</code> and <code>APP_ENV</code>variables
come from <code>xcon.xcon_settings.environment</code> and <code>xcon.xcon_settings.service</code>.
By default, these settings will use the <code>SERVICE_NAME</code> and <code>APP_ENV</code>
environmental variables. You can also set/override them expiclity
by setting a value one <code>xcon.xcon_settings.environment</code> and/or <code>xcon.xcon_settings.service</code>.</p>
<p>By default, Config will look in these paths (first).</p>
<ul>
<li>/{APP_NAME}/{APP_ENV}/{variable_name}</li>
<li>/{APP_NAME}/all/{variable_name}</li>
<li>/global/{APP_ENV}/{variable_name}</li>
<li>/global/all/{variable_name}</li>
<li>Details:<ul>
<li><a href="detailed_overview/#standard-directory-paths">Standard Directory Paths</a> </li>
<li><a href="detailed_overview/#directory-chain">Directory Chain</a></li>
</ul>
</li>
</ul>
<p>For each directory/path, we go through these providers (second):</p>
<ol>
<li>Environmental Variables</li>
<li>Dynamo Config Cache<ul>
<li>Will be skipped if table/permissions don't exist.</li>
</ul>
</li>
<li>AWS Secrets Manager<ul>
<li>Will be skipped if needed permissions not in place</li>
</ul>
</li>
<li>AWS Param Store<ul>
<li>Will be skipped if needed permissions not in place</li>
</ul>
</li>
<li>Details:<ul>
<li><a href="detailed_overview/#provider-chain">Provider Chain</a></li>
<li><a href="detailed_overview/#supported-providers">Supported Providers</a></li>
</ul>
</li>
</ol>
<p>In the order they are specified above (see <a href="detailed_overview/#standard-lookup-order">Standard Lookup Order</a>).</p>
<h3 id="param-store-provider-specifics">Param Store Provider Specifics<a class="headerlink" href="#param-store-provider-specifics" title="Permanent link">&para;</a></h3>
<p>Values are exclusively retrieved via "GetParametersByPath"; which allows for bulk-retrieval of settings.</p>
<p>All settings in a particular directory are retrieved in one request, and then whatever value is needed is returned.
These values are cached within the provider retriever object, so when other config values are asked for
there is a good chance it can return a value without having to go back to param store to ask for another value.</p>
<h3 id="secrets-manager-provider-specifics">Secrets Manager Provider Specifics<a class="headerlink" href="#secrets-manager-provider-specifics" title="Permanent link">&para;</a></h3>
<p>Secrets manager does not allow for bulk-retrieval of values.
Instead, you can bulk-request get a list of available secret names via <code>ListSecretVersionIds</code>.</p>
<p>The secrets provider will grab the full list, and then use that to know what is or is not available to get.
This makes it much faster, as it can quickly determine if it should attempt to retrieve a value or not based on this list.</p>
<h2 id="case-sensitivity">Case Sensitivity<a class="headerlink" href="#case-sensitivity" title="Permanent link">&para;</a></h2>
<p>The directory/path is case-sensitive; but the <code>VARIABLE_NAME</code> part at the end is case-insensitive.</p>
<p>So environmental variables are entirely case-insensitive, as they only have the <code>VAIRABLE_NAME</code>
and no directory path.</p>
<p>So you can do <code>config.get('some_var_name')</code>, and it would still find a value for it,
even if the name in the source/provider of values is <code>SOME_VAR_NAME</code>.</p>
<h2 id="add-permissions">Add Permissions<a class="headerlink" href="#add-permissions" title="Permanent link">&para;</a></h2>
<p>If you want to receive values from remote locations, the app will need the correct permissions.</p>
<p>For example, AWS's Param Store service will restrict access to the param values by path/directory.</p>
<p>There is a serverless permission resource template yaml file you can use directory or copy
and change as needed for your purposes.</p>
<ul>
<li>AWS Configuration Store Permissions:<ul>
<li><a href="https://github.com/xyngular/py-xcon/blob/main/xcon/serverless_files/ssm-permissions.yml">Param Store</a></li>
<li><a href="https://github.com/xyngular/py-xcon/blob/main/xcon/serverless_files/secrets-permissions.yml">Secrets Manager</a></li>
</ul>
</li>
</ul>
<p>If you want to use a dynamo table cache (see <a href="#caching">caching</a> in next section), use these:</p>
<ul>
<li>DynamoDB Cache Table:<ul>
<li><a href="https://github.com/xyngular/py-xcon/blob/main/xcon/serverless_files/config_manager/cache-table.yml">App Permissions</a></li>
<li><a href="https://github.com/xyngular/py-xcon/blob/main/xcon/serverless_files/cache-permissions.yml">Table Definition</a></li>
</ul>
</li>
</ul>
<p>For more details, see <a href="detailed_overview/#permissions">Permissions</a>.</p>
<h2 id="caching">Caching<a class="headerlink" href="#caching" title="Permanent link">&para;</a></h2>
<p>The purpose of the cache is to limit calls to the providers,
to prevent throttling from them.</p>
<p>For example, the AWS Param Store will throttle calls if there are too many per-second,
which could happen if several lambdas get launched and each lookup configuration simultaneously.</p>
<p>By default, values that are remotely looked up (ie: non-environmental variables)
are cached in a dynamo table.
Each of these lambdas can first check a DynamoDB cache table first, and if the value they need
is in there it will use that instead of attempting to retrieve values from the providers.</p>
<p>When something is not in the cache table, Config will look at each configured provider
and when it finds the value (or lack of a value), it will store what it found in the
dynamo cache table for later faster lookup.</p>
<p>The cache is a flattened list of all resolved values from all configured sources.
It will correctly cache according to the current providers, paths, and app environment + service.
Any of these variables can dynamically change, this information is added to each cached
entry so the correct value will be used in any situation.</p>
<h3 id="time-to-live">Time to live<a class="headerlink" href="#time-to-live" title="Permanent link">&para;</a></h3>
<p>The cache table is configured with a time-to-live attribute (named <code>ttl</code>).
The value is set for 12 hours, after which the item will expire.</p>
<p>There is an logarithm built into <code>Config</code> caching mechanism that will
pre-expire items sooner than normal randomly.
The algorith makes it more likely a particular item in the cache will expire
sooner as the expire-time approaches.</p>
<p>This means something that will expire in one hour will be more likely to
be pre-expired than something  that has 10 hours left.</p>
<p>This helps ensure that if a lambda is very busy and has many concurrent
instances running that it's likely only one of the lambdas would pre-expire
the cached items and 'refresh' them by re-looking up the values from the
providers and re-caching the newly looked up values.</p>
<p>This is a way to coordinate cache expiring and refreshing without
having to actually have any coordinating communication happening.</p>
<p>This allows the configuration refreshing to automatically scale
with the lambda activity in such a way as to limit the possibility
of being throttled from param store or secrets manager.</p>
<h3 id="table-layout-details">Table Layout Details<a class="headerlink" href="#table-layout-details" title="Permanent link">&para;</a></h3>
<p>The dynamo table has a two-part primary key.</p>
<p>The first part of the primary key is a hash key made up of apps
<code>xcon.xcon_settings.environment</code> and <code>xcon.xcon_settings.service</code> values.
This is the 'partition' key in the DynamoDB table, and AWS policies can allow
or deny access based on this hash key.
This allows the table to limit access to cached items by app's environment + service.</p>
<p>The second part of the primary key is a range-key made up of all provider names
and directory paths in the order they are looked up in. This allows multiple
values to be stored for the same config setting, depending on which providers
and directory paths were used to lookup the config setting.</p>
<p>This allows all looked up values for all dynamic situations to be cached
and used correctly.</p>
<p>For details see <a href="detailed_overview/#caching-details">Caching Details</a>, <a href="detailed_overview/#historical-background">Historical Background</a>.</p>
<h2 id="unit-tests">Unit Tests<a class="headerlink" href="#unit-tests" title="Permanent link">&para;</a></h2>
<p>By default, unit tests will always start with a Config object that has caching disabled,
and only uses the environmental provider (ie: only looks at environmental variables).</p>
<p>This is accomplished via an autouse fixture in a pytest plugin module
(see plugin module <code>xcon.pytest_plugin</code> or fixture <code>xcon.pytest_plugin.xcon</code>).</p>
<p>If a project has <code>xcon</code> as a dependency, pytest will find this plugin module
and automatically use it. Nothing more to do.</p>
<p>As an FYI/side-note: There is a <code>xinject.pytest_plugin.xyn_context</code> that will also
automatically  configure a blank context for each unit test.</p>
<p>This does mean you must configure Config using a fixture or at the top of your unit test method,
as any changes at the module-level will be forgotten.</p>
<p>The reason we do this is it guarantees that resources/config changes won't be propagaed/leak
into another unit test.</p>
<p>The end result is there is need to worry about these basics,
as they are taken care of for you automatically as long as the library is installed
as a dependency.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    2024-01-03
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "navigation.tracking", "content.code.annotate"], "search": "assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>